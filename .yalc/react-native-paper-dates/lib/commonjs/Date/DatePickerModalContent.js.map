{"version":3,"sources":["DatePickerModalContent.tsx"],"names":["DatePickerModalContent","props","mode","onChange","onConfirm","onDismiss","disableSafeTop","disableWeekDays","locale","validRange","dateMode","anyProps","state","setState","React","useState","date","startDate","endDate","dates","useEffect","collapsed","setCollapsed","onInnerChange","useCallback","params","prev","onInnerConfirm","onToggleCollapse","saveLabel","headerSeparator","emptyLabel","label","moreLabel","startLabel","endLabel","memo"],"mappings":"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","sourcesContent":["import * as React from 'react'\n\nimport Calendar, {\n  BaseCalendarProps,\n  CalendarDate,\n  CalendarDates,\n  MultiChange,\n  MultiConfirm,\n  RangeChange,\n  SingleChange,\n} from './Calendar'\n\nimport AnimatedCrossView from './AnimatedCrossView'\n\nimport DatePickerModalHeader from './DatePickerModalHeader'\nimport DatePickerModalContentHeader, {\n  HeaderPickProps,\n} from './DatePickerModalContentHeader'\nimport CalendarEdit from './CalendarEdit'\nimport DatePickerModalHeaderBackground from './DatePickerModalHeaderBackground'\n\nexport type LocalState = {\n  startDate: CalendarDate\n  endDate: CalendarDate\n  date: CalendarDate\n  dates: CalendarDates\n}\n\ninterface DatePickerModalContentBaseProps {\n  inputFormat?: string\n  locale: string\n  onDismiss: () => any\n  disableSafeTop?: boolean\n}\n\nexport interface DatePickerModalContentRangeProps\n  extends HeaderPickProps,\n    BaseCalendarProps,\n    DatePickerModalContentBaseProps {\n  mode: 'range'\n  startDate: CalendarDate\n  endDate: CalendarDate\n  onChange?: RangeChange\n  onConfirm: RangeChange\n}\n\nexport interface DatePickerModalContentSingleProps\n  extends HeaderPickProps,\n    BaseCalendarProps,\n    DatePickerModalContentBaseProps {\n  mode: 'single'\n  date?: CalendarDate\n  onChange?: SingleChange\n  onConfirm: SingleChange\n  dateMode?: 'start' | 'end'\n}\n\nexport interface DatePickerModalContentMultiProps\n  extends HeaderPickProps,\n    BaseCalendarProps,\n    DatePickerModalContentBaseProps {\n  mode: 'multiple'\n  dates?: CalendarDates\n  onChange?: MultiChange\n  onConfirm: MultiConfirm\n}\n\nexport function DatePickerModalContent(\n  props:\n    | DatePickerModalContentRangeProps\n    | DatePickerModalContentSingleProps\n    | DatePickerModalContentMultiProps\n) {\n  const {\n    mode,\n    onChange,\n    onConfirm,\n    onDismiss,\n    disableSafeTop,\n    disableWeekDays,\n    locale,\n    validRange,\n    dateMode,\n  } = props\n\n  const anyProps = props as any\n\n  // use local state to add only onConfirm state changes\n  const [state, setState] = React.useState<LocalState>({\n    date: anyProps.date,\n    startDate: anyProps.startDate,\n    endDate: anyProps.endDate,\n    dates: anyProps.dates,\n  })\n\n  // update local state if changed from outside or if modal is opened\n  React.useEffect(() => {\n    setState({\n      date: anyProps.date,\n      startDate: anyProps.startDate,\n      endDate: anyProps.endDate,\n      dates: anyProps.dates,\n    })\n  }, [anyProps.date, anyProps.startDate, anyProps.endDate, anyProps.dates])\n\n  const [collapsed, setCollapsed] = React.useState<boolean>(true)\n\n  const onInnerChange = React.useCallback(\n    (params) => {\n      onChange && onChange(params)\n      setState((prev) => ({ ...prev, ...params }))\n    },\n    [onChange, setState]\n  )\n\n  const onInnerConfirm = React.useCallback(() => {\n    if (mode === 'single') {\n      ;(onConfirm as DatePickerModalContentSingleProps['onConfirm'])({\n        date: state.date,\n      })\n    } else if (mode === 'range') {\n      ;(onConfirm as DatePickerModalContentRangeProps['onConfirm'])({\n        startDate: state.startDate,\n        endDate: state.endDate,\n      })\n    } else if (mode === 'multiple') {\n      ;(onConfirm as DatePickerModalContentMultiProps['onConfirm'])({\n        dates: state.dates || [],\n      })\n    }\n  }, [state, mode, onConfirm])\n\n  const onToggleCollapse = React.useCallback(() => {\n    setCollapsed((prev) => !prev)\n  }, [setCollapsed])\n\n  return (\n    <>\n      <DatePickerModalHeaderBackground>\n        <DatePickerModalHeader\n          locale={locale}\n          onSave={onInnerConfirm}\n          onDismiss={onDismiss}\n          saveLabel={props.saveLabel}\n          disableSafeTop={disableSafeTop}\n        />\n        <DatePickerModalContentHeader\n          state={state}\n          mode={mode}\n          collapsed={collapsed}\n          onToggle={onToggleCollapse}\n          headerSeparator={props.headerSeparator}\n          emptyLabel={props.emptyLabel}\n          label={props.label}\n          moreLabel={props.moreLabel}\n          startLabel={props.startLabel}\n          endLabel={props.endLabel}\n          locale={locale}\n        />\n      </DatePickerModalHeaderBackground>\n\n      <AnimatedCrossView\n        collapsed={collapsed}\n        calendar={\n          <Calendar\n            locale={locale}\n            mode={mode}\n            startDate={state.startDate}\n            endDate={state.endDate}\n            date={state.date}\n            onChange={onInnerChange}\n            disableWeekDays={disableWeekDays}\n            dates={state.dates}\n            validRange={validRange}\n            dateMode={dateMode}\n          />\n        }\n        calendarEdit={\n          <CalendarEdit\n            mode={mode}\n            state={state}\n            label={props.label}\n            startLabel={props.startLabel}\n            endLabel={props.endLabel}\n            collapsed={collapsed}\n            onChange={onInnerChange}\n            validRange={validRange}\n            locale={locale}\n          />\n        }\n      />\n    </>\n  )\n}\n\nexport default React.memo(DatePickerModalContent)\n"]}