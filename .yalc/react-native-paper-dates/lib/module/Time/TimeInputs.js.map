{"version":3,"sources":["TimeInputs.tsx"],"names":["React","View","StyleSheet","useWindowDimensions","useTheme","clockTypes","toHourInputFormat","toHourOutputFormat","TimeInput","AmPmSwitcher","useLatest","TimeInputs","hours","minutes","onFocusInput","focused","inputType","onChange","is24Hour","startInput","useRef","endInput","dimensions","isLandscape","width","height","theme","onSubmitStartInput","useCallback","current","focus","onSubmitEndInput","minutesRef","onChangeHours","newHours","styles","inputContainer","inputContainerLandscape","newHoursFromInput","hoursAndMinutesSeparator","spaceDot","dot","backgroundColor","colors","text","betweenDot","newMinutesFromInput","newMinutes","spaceBetweenInputsAndSwitcher","create","flexDirection","alignItems","flex","fontSize","borderRadius","memo"],"mappings":"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","sourcesContent":["// @typescript-eslint/no-unused-vars\n// WORK IN PROGRESS\n\nimport * as React from 'react'\nimport {\n  View,\n  StyleSheet,\n  useWindowDimensions,\n  TextInput as TextInputNative,\n} from 'react-native'\nimport { useTheme } from 'react-native-paper'\n\nimport {\n  clockTypes,\n  PossibleClockTypes,\n  PossibleInputTypes,\n  toHourInputFormat,\n  toHourOutputFormat,\n} from './timeUtils'\nimport TimeInput from './TimeInput'\nimport AmPmSwitcher from './AmPmSwitcher'\nimport { useLatest } from '../utils'\n\nfunction TimeInputs({\n  hours,\n  minutes,\n  onFocusInput,\n  focused,\n  inputType,\n  onChange,\n  is24Hour,\n}: {\n  inputType: PossibleInputTypes\n  focused: PossibleClockTypes\n  hours: number\n  minutes: number\n  onFocusInput: (type: PossibleClockTypes) => any\n  onChange: (hoursMinutesAndFocused: {\n    hours: number\n    minutes: number\n    focused?: undefined | PossibleClockTypes\n  }) => any\n  is24Hour: boolean\n}) {\n  const startInput = React.useRef<TextInputNative | null>(null)\n  const endInput = React.useRef<TextInputNative | null>(null)\n  const dimensions = useWindowDimensions()\n  const isLandscape = dimensions.width > dimensions.height\n  const theme = useTheme()\n\n  const onSubmitStartInput = React.useCallback(() => {\n    if (endInput.current) {\n      endInput.current.focus()\n    }\n  }, [endInput])\n\n  const onSubmitEndInput = React.useCallback(() => {\n    // TODO: close modal and persist time\n  }, [])\n\n  const minutesRef = useLatest(minutes)\n  const onChangeHours = React.useCallback(\n    (newHours: number) => {\n      onChange({\n        hours: newHours,\n        minutes: minutesRef.current,\n        focused: clockTypes.hours,\n      })\n    },\n    [onChange, minutesRef]\n  )\n\n  return (\n    <View\n      style={[\n        styles.inputContainer,\n        isLandscape && styles.inputContainerLandscape,\n      ]}\n    >\n      <TimeInput\n        ref={startInput}\n        placeholder={'00'}\n        value={toHourInputFormat(hours, is24Hour)}\n        clockType={clockTypes.hours}\n        pressed={focused === clockTypes.hours}\n        onPress={onFocusInput}\n        inputType={inputType}\n        returnKeyType={'next'}\n        onSubmitEditing={onSubmitStartInput}\n        blurOnSubmit={false}\n        onChanged={(newHoursFromInput) => {\n          let newHours = toHourOutputFormat(newHoursFromInput, hours, is24Hour)\n          if (newHoursFromInput > 24) {\n            newHours = 24\n          }\n          onChange({\n            hours: newHours,\n            minutes,\n          })\n        }}\n        // onChangeText={onChangeStartInput}\n      />\n      <View style={styles.hoursAndMinutesSeparator}>\n        <View style={styles.spaceDot} />\n        <View style={[styles.dot, { backgroundColor: theme.colors.text }]} />\n        <View style={styles.betweenDot} />\n        <View style={[styles.dot, { backgroundColor: theme.colors.text }]} />\n        <View style={styles.spaceDot} />\n      </View>\n      <TimeInput\n        ref={endInput}\n        placeholder={'00'}\n        value={minutes}\n        clockType={clockTypes.minutes}\n        pressed={focused === clockTypes.minutes}\n        onPress={onFocusInput}\n        inputType={inputType}\n        onSubmitEditing={onSubmitEndInput}\n        onChanged={(newMinutesFromInput) => {\n          let newMinutes = newMinutesFromInput\n          if (newMinutesFromInput > 60) {\n            newMinutes = 60\n          }\n          onChange({\n            hours,\n            minutes: newMinutes,\n          })\n        }}\n      />\n      {!is24Hour && (\n        <>\n          <View style={styles.spaceBetweenInputsAndSwitcher} />\n          <AmPmSwitcher hours={hours} onChange={onChangeHours} />\n        </>\n      )}\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  spaceBetweenInputsAndSwitcher: { width: 12 },\n  inputContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  inputContainerLandscape: {\n    flex: 1,\n  },\n  hoursAndMinutesSeparator: {\n    fontSize: 65,\n    width: 24,\n    alignItems: 'center',\n  },\n  spaceDot: {\n    flex: 1,\n  },\n  dot: {\n    width: 7,\n    height: 7,\n    borderRadius: 7 / 2,\n  },\n  betweenDot: {\n    height: 12,\n  },\n})\n\nexport default React.memo(TimeInputs)\n"]}